<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robot" content="index,follow" />
    <meta name="description" content="隨機打卡景點介紹" />
    <meta name="keywords" content="打卡景點 隨機 拍照 網紅 觀光" />

    <meta name="author" content="hanson" />
    <link rel="shortcut icon" href="./img/logo.svg" />
    <link rel="bookmark" href="./img/logo.svg" />
    <title>出發吧！全台散心去～</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@100;200;300;400;500;600;700;800;900&display=swap"
      rel="stylesheet"
    />
    <script
      src="https://code.jquery.com/jquery-3.7.1.min.js"
      integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
      crossorigin="anonymous"
    ></script>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css"
      integrity="sha512-dPXYcDub/aeb08c63jRq/k6GaKccl256JQy/AnOq7CAnEZ9FzSL9wSbcZkMp4R26vBsMLFYH4kQ67/bbV8XaCQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <style>
      * {
        scroll-behavior: smooth;
        scroll-margin-top: 15px;
        font-family: "Noto Sans TC", sans-serif;
      }
      .topBtn {
        cursor: pointer;
        visibility: hidden;
        width: 50px;
        height: 50px;
        background-color: #36363645;
        color: white;
        position: fixed;
        right: 30px;
        bottom: 35px;
        border-radius: 50%;
        text-align: center;
        line-height: 50px;
        &:hover {
          background-color: #6666669d;
        }
      }

      header {
        .wrap {
          position: relative;
          width: 100vw;
          height: 100vh;
          & img {
            width: 100%;
            height: 100%;
            object-fit: cover;
          }

          .b-opacity {
            transition: all 0.5s ease-in-out;

            position: absolute;
            left: 0;
            top: 0;
            width: 100vw;
            height: 100vh;
            z-index: 1;
            background-color: rgb(0, 0, 0, 0.45);
          }
          .goBtn {
            text-align: center;
            position: absolute;
            left: 0;
            right: 0;
            margin: auto;

            width: 200px;
            bottom: 15%;
            z-index: 2;
            background-color: #f7d200;
            padding: 0.5rem 2rem;
            border-radius: 20px;
            text-decoration: none;
            color: white;
            font-size: 2rem;
            font-weight: bolder;
            border: 3px solid white;
            &:hover {
              background-color: #b71c1c;
            }
          }
        }
      }
      main {
        margin-top: 3%;
        .cards {
          margin-top: 3%;
        }
        .title {
          text-align: center;
          display: flex;
          justify-content: space-between;
          & a {
            text-decoration: none;
            color: white;
            background-color: #0c8288;
            padding: 0.7rem 1.4rem;
            border-radius: 10px;
            font-size: 1.3rem;
            font-weight: 600;
            transition: all 0.2s ease-in-out;
            &:hover {
              background-color: #139fa6;
            }
          }
        }
        .cards {
          position: relative;

          .row {
            display: flex;
            justify-content: center;
            .card {
              position: relative;
              cursor: pointer;
              display: flex;
              flex-direction: row;
              height: 150px;
              border: 1px solid black;
              &:hover {
                border: 1px solid #f7d200;
                box-shadow: 0px 0px 10px #f7d200;
                &:hover .arrow {
                  background-color: #0c8288;
                }
              }
              .image {
                width: 150px;
                height: 147.9px;
                margin-left: -12px;
                & img {
                  border-radius: 5px 0px 0px 5px;

                  width: 100%;
                  height: 100%;
                  object-fit: cover;
                }
              }
              & article {
                width: 380px;
                padding-left: 12px;
                padding-block: 1rem;
                h3 {
                  font-size: 1.5rem;
                }
                p {
                  color: darkgreen;
                }
                .arrow {
                  border-radius: 5px;
                  text-align: center;
                  padding: 0rem 0.5rem;
                  position: absolute;
                  right: 15px;
                  bottom: 15px;

                  font-size: 1.5rem;
                  color: white;
                  background-color: #a0ccce;
                  text-align: end;

                  & i {
                    transform: translate(-50%);
                  }
                }
              }
            }
          }
        }
      }
      footer {
        width: 100%;
        height: 50px;
        text-align: center;
        line-height: 50px;
        margin-top: 30px;
        box-shadow: 0 -1px 3px grey;
        font-weight: 700;
      }
      .bgb {
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.442);

        position: fixed;
        z-index: 998;
        right: 0;
        top: 0;
      }
      .cover {
        display: none;

        position: fixed;
        left: 0;
        right: 0;
        bottom: 0;
        top: 0;
        margin: auto;
        border: 5px solid black;
        border-radius: 20px;
        z-index: 999;
        width: 65%;
        height: 53%;
        background-color: rgba(255, 255, 255);

        .left {
          width: 300px;
          height: 300px;
          margin-top: 5%;
          margin-inline: 5rem;
          border-radius: 20px;
          & img {
            border-radius: 20px;

            width: 100%;
            height: 100%;
            object-fit: cover;
          }
        }
        .right {
          display: flex;
          flex-direction: column;
          text-align: start;
          flex: 1;
          margin-top: 5%;
          margin-right: 3rem;
          & h3 {
            font-size: 2.5rem;
          }
          .address {
            color: darkgreen;
            font-size: 1.5rem;
          }
          .info {
            font-size: 1.3rem;
            font-weight: 600;

            > span {
              font-weight: 400;
            }
          }
          .intro {
            overflow: auto;
            margin-bottom: 2rem;
            flex: 1;
          }
          .open {
            overflow: auto;
          }
        }

        .esc {
          cursor: pointer;
          position: absolute;
          top: 20px;
          right: 20px;
          border: 3px solid rgba(128, 128, 128, 0.619);
          color: rgba(128, 128, 128, 0.619);
          font-size: 2rem;
          font-weight: 700;
          text-align: center;
          width: 50px;
          height: 50px;
          line-height: 37px;
          &:hover {
            border: 3px solid rgba(0, 0, 0, 0.8);
            color: rgba(0, 0, 0, 0.8);
          }
        }
      }
      .active {
        display: flex;
      }
    </style>
  </head>

  <body>
    <a class="topBtn" id="topBtn" href="#go"
      ><i class="bi bi-arrow-bar-up"></i
    ></a>
    <header>
      <div class="wrap">
        <img src="./img/banner.jpg" alt="fPage-bgc" />
        <div class="" id="header-b"></div>

        <a href="#go" class="goBtn">立即探索</a>
      </div>
    </header>
    <main>
      <div class="container d-flex flex-column align-items-center">
        <div class="fakeBgb">
          <div class="cover">
            <div class="esc">x</div>
            <div class="left"><img src="" alt="" /></div>
            <div class="right">
              <h3></h3>
              <p class="address"></p>
              <p class="info">
                <i class="bi bi-clock"></i>&nbsp;&nbsp;<span class="open">
                </span>
              </p>
              <p class="info">
                <i class="bi bi-telephone-forward-fill"></i
                >&nbsp;&nbsp;&nbsp;<span class="tel"></span>
              </p>

              <p class="intro"></p>
            </div>
          </div>
        </div>

        <div class="title container">
          <h2 id="go" class="rainbow-text">熱門觀光景點</h2>

          <a href="#go" class="randomBtn">隨機景點</a>
        </div>

        <div class="cards">
          <div class="row gap-5"></div>
        </div>
      </div>
    </main>
    <footer>
      <div class="footer">&copy; all right reserved by 翰陞</div>
    </footer>
    <script>
      let pageHeight = $("body").height();
      let windowHeight = $(window).height();
      let scrollAreaHeight = pageHeight - windowHeight;

      //隨機景點按鈕0.1秒後滑動至#go
      $(document).ready(() => {
        if (window.location.hash === "#go") {
          setTimeout(() => {
            let target = $("#go");
            //確保真的有抓到target才做動作
            if (target.length) {
              target.get(0).scrollIntoView(); //轉成原生js才能用scrollIntoView
            }
          }, 100);
        }
      });
      $(window).on("scroll", (e) => {
        let scrollTop = $(e.currentTarget).scrollTop();
        let scrollPercent = Math.round((scrollTop / scrollAreaHeight) * 100);
        // console.log(scrollPercent);
        if (scrollPercent > 748) {
          $(".topBtn").css("visibility", "visible");
        } else {
          $(".topBtn").css("visibility", "hidden");
        }
        if (scrollPercent < 100) {
          $(".cover").removeClass("active");
          $(".fakeBgb").removeClass("bgb");
        }
      });

      $(".goBtn").on("mouseenter", () => {
        $("#header-b").addClass("b-opacity");
      });
      $(".goBtn").on("mouseleave", () => {
        $("#header-b").removeClass("b-opacity");
      });

      //隨機景點按鈕紀錄並且重整
      $(".randomBtn").on("click", (e) => {
        location.hash = "go";
        location.reload();
      });

      let url = "./data/tourism.json";
      let counter = 1;

      $.getJSON(url, function (e) {
        while (counter <= 100) {
          let random = Math.floor(Math.random() * 5111);

          let data = e.XML_Head.Infos.Info[random];
          if (
            data.Picture1 != "" &&
            data.Picture1 != null &&
            data.Add != null
          ) {
            let template = ` <div class="col-5 card animate__animated" data-n="${random}">
                <div class="image" >
                  <img
                    src="${data.Picture1}"
                    alt="${data.Name}的照片"
                  />
                </div>

                <article>
                  <h3>${data.Name}</h3>
                  <p>${data.Add}</p>
                  <div class="arrow"><i class="bi bi-search"></i></div>
                </article>
              </div>`;
            $(".row").append(template);
            counter++;
          }
        }
      });

      $(".cards").on("click", ".card", (e) => {
        let that = e.currentTarget;
        show(parseInt($(that).data("n")));
      });
      function show(n) {
        $.getJSON(url, (e) => {
          let data = e.XML_Head.Infos.Info[n];

          $(".left img")
            .attr("src", data.Picture1)
            .attr("alt", `${data.Name}的照片`)
            .attr("title", `${data.Name}`);
          $(".right h3 ").html(data.Name);
          $(".right .address ").html(data.Add);
          if (data.Opentime != "") {
            $(".right .info .open ").html(data.Opentime);
          } else {
            $(".right .info .open ").html("詳見官網或電話洽詢");
          }
          $(".right .info .tel ").html(data.Tel);
          $(".right .intro ").html(data.Toldescribe);
        });
        $(".cover").addClass("active");
        $(".fakeBgb").addClass("bgb");
      }

      $(".esc").on("click", () => {
        $(".cover").removeClass("active");
        $(".fakeBgb").removeClass("bgb");
      });
      $(".fakeBgb").on("click", (e) => {
        $(".cover").removeClass("active");

        $(".fakeBgb").removeClass("bgb");
      });
      $(".cover").on("click", (e) => {
        e.stopPropagation();
      });
    </script>

    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
      integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
      crossorigin="anonymous"
    ></script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
      integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
